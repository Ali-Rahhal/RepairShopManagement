@page
@model RepairShop.Areas.Admin.Pages.AuditLogHistory.IndexModel
@{
    ViewData["Title"] = "Audit Log";
}

<div class="card shadow border-0 my-4">

    <!-- HEADER -->
    <div class="card-header bg-primary bg-gradient py-3">
        <h2 class="text-center text-white mb-0">
            <i class="bi bi-journal-text me-2"></i> Audit Log
        </h2>
    </div>

    <div class="card-body p-4">

        <!-- FILTER PANEL -->
        <div class="border rounded bg-light p-3 mb-4">
            <div class="row g-3 align-items-end">

                <!-- Action -->
                <div class="col-12 col-md-6 col-lg-3">
                    <label class="form-label small fw-semibold">Action</label>
                    <select id="actionFilter" class="form-select form-select-sm">
                        <option value="All">All Actions</option>
                    </select>
                </div>

                <!-- Entity Type -->
                <div class="col-12 col-md-6 col-lg-3">
                    <label class="form-label small fw-semibold">Entity Type</label>
                    <select id="entityTypeFilter" class="form-select form-select-sm">
                        <option value="All">All Entities</option>
                    </select>
                </div>

                <!-- Username -->
                <div class="col-12 col-md-6 col-lg-3">
                    <label class="form-label small fw-semibold">User</label>
                    <input type="text"
                           id="userNameFilter"
                           class="form-control form-control-sm"
                           placeholder="Search by username..."
                           autocomplete="off">
                </div>

                <!-- From Date -->
                <div class="col-6 col-md-3 col-lg-1">
                    <label class="form-label small fw-semibold">From</label>
                    <input type="date"
                           id="startDateFilter"
                           name="startDate"
                           class="form-control form-control-sm">
                </div>

                <!-- To Date -->
                <div class="col-6 col-md-3 col-lg-1">
                    <label class="form-label small fw-semibold">To</label>
                    <input type="date"
                           id="endDateFilter"
                           name="endDate"
                           class="form-control form-control-sm">
                </div>

                <!-- ACTION BUTTONS -->
                <div class="col-12 col-lg-1 d-flex gap-2">
                    <button type="button"
                            class="btn btn-sm btn-outline-warning w-100"
                            onclick="clearFilters()"
                            title="Clear filters">
                        <i class="bi bi-x-circle"></i>
                    </button>

                    <button type="button"
                            class="btn btn-sm btn-outline-success w-100"
                            onclick="refreshTable(this)"
                            title="Refresh table">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>

            </div>
        </div>

        <!-- TABLE -->
        <div class="table-responsive">
            <table id="tblData" class="table table-hover table-bordered align-middle w-100">
                <thead class="table-primary text-center">
                    <tr>
                        <th style="width:5%">#</th>
                        <th>User</th>
                        <th>Action</th>
                        <th>Entity Type</th>
                        <th>Description</th>
                        <th style="width:15%">Created Date</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

    </div>
</div>

@section Scripts {
    <script src="~/js/auditLog.js" asp-append-version="true"></script>
}
