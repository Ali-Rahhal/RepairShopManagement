@page
@model RepairShop.Areas.Admin.Pages.AuditLogHistory.IndexModel
@{
    ViewData["Title"] = "Audit Log";
}

<div class="card shadow border-0 my-4">
    <div class="card-header text-white bg-primary bg-gradient py-3">
        <h2 class="text-center text-white">Audit Log</h2>
    </div>

    <div class="card-body p-4">

        <!-- Filters -->
        <div class="row g-3 mb-3">

            <!-- Action -->
            <div class="col-12 col-sm-6 col-lg-3">
                <label class="form-label small fw-semibold">Action</label>
                <select id="actionFilter" class="form-select form-select-sm">
                    <option value="All">All Actions</option>
                </select>
            </div>

            <!-- Entity Type -->
            <div class="col-12 col-sm-6 col-lg-3">
                <label class="form-label small fw-semibold">Entity Type</label>
                <select id="entityTypeFilter" class="form-select form-select-sm">
                    <option value="All">All Entities</option>
                </select>
            </div>

            <!-- Username -->
            <div class="col-12 col-sm-6 col-lg-3">
                <label class="form-label small fw-semibold">User</label>
                <input type="text"
                       id="userNameFilter"
                       class="form-control form-control-sm"
                       placeholder="Search by user..."
                       autocomplete="off">
            </div>

            <!-- From Date -->
            <div class="col-12 col-sm-6 col-lg-1">
                <label class="form-label small fw-semibold">From</label>
                <input type="date"
                       id="startDateFilter"
                       name="startDate"
                       class="form-control form-control-sm">
            </div>

            <!-- To Date -->
            <div class="col-12 col-sm-6 col-lg-1">
                <label class="form-label small fw-semibold">To</label>
                <input type="date"
                       id="endDateFilter"
                       name="endDate"
                       class="form-control form-control-sm">
            </div>

            <!-- Buttons -->
            <div class="col-12 col-lg-1 d-flex align-items-end gap-2">
                <button type="button"
                        class="btn btn-sm btn-outline-warning w-100"
                        onclick="clearFilters()"
                        title="Clear filters">
                    <i class="bi bi-x-circle"></i>
                </button>

                <button type="button"
                        class="btn btn-sm btn-outline-success w-100"
                        onclick="refreshTable(this)"
                        title="Refresh table">
                    <i class="bi bi-arrow-clockwise"></i>
                </button>
            </div>

        </div>

        <!-- Table -->
        <div class="table-responsive w-100 w-xl-75 mx-auto">
            <table id="tblData" class="table table-bordered table-striped w-100">
                <thead>
                    <tr class="table-primary">
                        <th>Log #</th>
                        <th>User</th>
                        <th>Action</th>
                        <th>Entity Type</th>
                        <th>Description</th>
                        <th>Created Date</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

    </div>
</div>

@section Scripts {
    <script src="~/js/auditLog.js" asp-append-version="true"></script>
}
